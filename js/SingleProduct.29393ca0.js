(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SingleProduct"],{4701:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{height:"100%"},attrs:{id:"singleProduct",fluid:""}},[n("v-overlay",{attrs:{value:!t.sell}},[n("h1",[t._v("商品已下架。")])]),n("v-row",{staticClass:"justify-center mb-5",staticStyle:{height:"100%"}},[n("v-col",{staticClass:"col-10 col-lg-5 d-flex flex-column justify-center"},[n("v-carousel",{attrs:{"hide-delimiters":"","hide-delimiter-background":"","show-arrows-on-hover":""},scopedSlots:t._u([{key:"prev",fn:function(e){var o=e.on,r=e.attrs;return[n("v-icon",t._g(t._b({attrs:{color:"grey"}},"v-icon",r,!1),o),[t._v("mdi-chevron-left")])]}},{key:"next",fn:function(e){var o=e.on,r=e.attrs;return[n("v-icon",t._g(t._b({attrs:{color:"grey"}},"v-icon",r,!1),o),[t._v("mdi-chevron-right")])]}}])},t._l(t.image,(function(t,e){return n("v-carousel-item",{key:e,attrs:{src:t}})})),1)],1),n("v-col",{staticClass:"col-10 col-lg-5 d-flex flex-column justify-center"},[n("v-card",{staticClass:"mx-auto",attrs:{width:"80%",flat:""}},[n("v-card-text",{staticClass:"pa-0"},[n("v-row",[n("v-col",{staticClass:"col-12 pb-0"},[n("span",{staticClass:"text-h4 font-weight-bold"},[t._v(t._s(t.name))])]),n("v-col",{staticClass:"col-12 pb-0"},[n("span",{staticClass:"text-h5"},[t._v("$"+t._s(t.price))])]),n("v-col",{staticClass:"col-12"},[n("span",{staticClass:"text-body-1",staticStyle:{height:"100%","white-space":"pre-wrap"}},[t._v(t._s(t.description))])]),n("v-col",{staticClass:"col-12 text-right pb-0"},[n("v-progress-linear",{attrs:{color:"pink lighten-5",rounded:"",height:"25",width:"100%"},model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}},[n("strong",[t._v(t._s(t.progress))])]),n("small",[t._v("下單數達 "+t._s(t.count)+" 件，每件回饋 "+t._s(t.coupon)+" 點")])],1)],1),n("v-row",[n("v-col",{staticClass:"col-12 col-md-2 font-weight-bold d-flex align-center"},[n("span",{staticClass:"pt-1"},[t._v("品項")])]),n("v-col",{staticClass:"col-12 col-md-10"},[n("v-btn-toggle",{attrs:{group:"",color:"red lighten-3"},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},t._l(t.options,(function(e){return n("v-btn",{key:e,staticClass:"pt-1",attrs:{value:e,small:""}},[n("span",{staticClass:"text-body-2"},[t._v(t._s(e))])])})),1)],1)],1),n("v-row",[n("v-col",{staticClass:"col-12 col-md-2 font-weight-bold d-flex align-center"},[n("span",{staticClass:"pt-1"},[t._v("數量")])]),n("v-col",{staticClass:"col-12 col-md-10 d-flex align-center"},[n("InputNumber",{attrs:{rules:t.amountRules},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}},[t._v(t._s(t.amount))]),n("v-spacer"),n("v-btn",{attrs:{plain:""},on:{click:t.addcart}},[t._v("加入購物車")])],1)],1)],1)],1)],1)],1)],1)},r=[],a=n("1da1"),s=(n("96cf"),n("b680"),n("b0c0"),n("a4d3"),n("e01a"),n("99af"),n("d81d"),n("5036"),n("6e95")),i={name:"SingleProduct",components:{InputNumber:s["a"]},data:function(){return{name:"",price:"",description:"",image:[],sell:!0,amount:0,category:"",count:0,coupon:0,options:[],option:"",order_quantity:0,amountRules:[function(t){return!!t||"請輸入數量"},function(t){return t&&t>=1||"請輸入正確數量"}]}},computed:{progress:function(){return this.order_quantity<=0?"0%":this.order_quantity>=this.count?"100%":100*(this.order_quantity/this.count).toFixed(2)+"%"}},methods:{add_option:function(t){this.option=t},addcart:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.amount){e.next=3;break}return t.$swal({icon:"error",title:"錯誤",text:"請輸入正確數量"}),e.abrupt("return");case 3:if(void 0!==t.option&&0!==t.option.length&&t.option){e.next=6;break}return t.$swal({icon:"error",title:"錯誤",text:"請選擇商品品項"}),e.abrupt("return");case 6:if(0!==t.$store.state.jwt.token.length){e.next=9;break}return t.$swal({icon:"error",title:"錯誤",text:"請先登入"}),e.abrupt("return");case 9:return e.prev=9,e.next=12,t.axios.post("/users/cart",{product:t.$route.params.id,option:t.option,amount:t.amount},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 12:t.$swal({icon:"success",title:"成功",text:"成功購物車"}),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](9),t.$swal({icon:"error",title:"錯誤",text:"加入購物車失敗"});case 18:case"end":return e.stop()}}),e,null,[[9,15]])})))()}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/products/"+t.$route.params.id);case 3:n=e.sent,o=n.data,t.name=o.result.name,t.price=o.result.price,t.category=o.result.category,t.description=o.result.description,t.image=o.result.image.map((function(t){return"".concat("https://one797back.onrender.com","/files/").concat(t)})).concat(o.result.imagefiles.map((function(t){return"".concat("https://one797back.onrender.com","/files/").concat(t)}))),t.sell=o.result.sell,t.count=o.result.count,t.coupon=o.result.coupon,t.options=o.result.options,t.order_quantity=o.result.order_quantity,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),t.$router.push("/");case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()}},c=i,l=n("2877"),u=n("6544"),p=n.n(u),d=n("8336"),h=n("5530"),v=(n("7e58"),n("3860")),m=n("a9ad"),g=n("58df"),f=Object(g["a"])(v["a"],m["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(h["a"])(Object(h["a"])({},v["a"].options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var t=this.setTextColor(this.color,Object(h["a"])({},v["a"].options.methods.genData.call(this)));return this.group?t:this.setBackgroundColor(this.backgroundColor,t)}}}),b=n("b0af"),x=n("99d9"),_=n("5e66"),C=n("3e35"),w=n("62ad"),y=n("a523"),k=n("132d"),$=n("a797"),V=n("8e36"),j=n("0fd9"),N=n("2fa4"),B=Object(l["a"])(c,o,r,!1,null,null,null);e["default"]=B.exports;p()(B,{VBtn:d["a"],VBtnToggle:f,VCard:b["a"],VCardText:x["b"],VCarousel:_["a"],VCarouselItem:C["a"],VCol:w["a"],VContainer:y["a"],VIcon:k["a"],VOverlay:$["a"],VProgressLinear:V["a"],VRow:j["a"],VSpacer:N["a"]})},5036:function(t,e,n){},6973:function(t,e,n){},"6e95":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"inputNumber"}},[n("v-text-field",{attrs:{label:t.label,mask:t.mask,"hide-details":"false",rules:t.rules,value:t.value,plain:"",dense:""},on:{change:function(e){return t.$emit("input",e)}}},[n("v-icon",{attrs:{slot:"prepend",color:"#C0C7CA"},on:{click:t.decrease},slot:"prepend"},[t._v("mdi-minus-box")]),n("v-icon",{attrs:{slot:"append-outer",color:"#ffcec9"},on:{click:t.increase},slot:"append-outer"},[t._v("mdi-plus-box")])],1)],1)},r=[],a=(n("a9e3"),{props:{label:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:9999},maxLength:{type:Number,default:4},rules:{type:Array,default:function(){return[]}},step:{type:Number,default:1},value:[String,Number]},computed:{mask:function(){for(var t="",e=0;e<this.maxLength;e++)t="".concat(t,"#");return t}},methods:{increase:function(){if(isNaN(parseInt(this.value)))return this.$emit("input",this.step);this.value!==this.max&&this.$emit("input",parseInt(this.value)+this.step)},decrease:function(){if(isNaN(parseInt(this.value)))return this.$emit("input",this.min);this.value!==this.min&&this.$emit("input",parseInt(this.value)-this.step)}}}),s=a,i=(n("8ca6"),n("2877")),c=n("6544"),l=n.n(c),u=n("132d"),p=n("8654"),d=Object(i["a"])(s,o,r,!1,null,null,null);e["a"]=d.exports;l()(d,{VIcon:u["a"],VTextField:p["a"]})},"7e58":function(t,e,n){},"8ca6":function(t,e,n){"use strict";n("6973")}}]);
//# sourceMappingURL=SingleProduct.29393ca0.js.map